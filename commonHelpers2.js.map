{"version":3,"file":"commonHelpers2.js","sources":["../src/js/category-card-markup.js","../src/js/fetch-categories.js","../src/js/show-search-form.js","../src/js/set-exercise-title.js","../src/js/handle-filters-click.js","../src/js/fetch-exercises.js","../src/js/icon-path-updater.js","../src/js/scroll-to-top.js","../src/js/handle-email-form.js","../src/js/main.js"],"sourcesContent":["/**create markup for category card\n *\n * @param {object} data\n * @returns {string}\n */\nexport const createCategoryMarkup = data =>\n  data\n    .map(\n      ({ filter = 'Not found', name = 'Not found', imgURL }) =>\n        `<div class=\"category-wrap\" name=\"${name}\">\n      <img class=\"category-img\" src=\"${imgURL}\" alt=\"${name}\" loading=\"lazy\">\n      <div class=\"category-text-wrap\">\n          <p class=\"category-title\">${name}</p>\n          <p class=\"category-subtitle\">${filter}</p>\n      </div>\n  </div>`\n    )\n    .join('');\n","import axios from 'axios';\nimport { constants } from './constants';\nimport { createCategoryMarkup } from './category-card-markup';\nimport { showToast } from './toast';\n\nexport async function fetchCategories(params) {\n  let filterParams = '?';\n  const content = document.querySelector('.content');\n  const loader = document.querySelector('.loader-text');\n  loader.style.display = 'inline-block';\n\n  for (const [key, value] of Object.entries(params)) {\n    filterParams += `${key}=${value}&`;\n  }\n\n  try {\n    const response = await axios({\n      method: 'get',\n      url: `${constants.DOMEN}/filters${filterParams}limit=${window.innerWidth < 768 ? 9 : 12}`,\n      responseType: 'json',\n    });\n\n    content.innerHTML = createCategoryMarkup(response.data.results);\n    return response.data.totalPages;\n  } catch (error) {\n    showToast({\n      type: 'error',\n      title: 'Server error',\n      message: 'Sorry, the category information was not retrieved from the server. Please refresh the page',\n    });\n  } finally {\n    loader.style.display = 'none';\n  }\n}\n","export function showSearchForm(isShow) {\n  const searchForm = document.querySelector('.form-search-exersises');\n  if (isShow) {\n    searchForm.classList.remove('is-hide');\n    return;\n  }\n  //searchForm.reset();\n  searchForm.classList.add('is-hide');\n}\n","export function setExerciseTitle(text) {\n  const title = document.querySelector('.js-title');\n  const titleSlash = document.querySelector('.js-title-slash');\n\n  if (text === '') {\n    title.classList.add('is-hide');\n    titleSlash.classList.add('is-hide');\n    return;\n  }\n\n  title.textContent = text;\n  title.classList.remove('is-hide');\n  titleSlash.classList.remove('is-hide');\n}\n","import { createPagination } from './create-pagination';\nimport { showSearchForm } from './show-search-form';\nimport { setExerciseTitle } from './set-exercise-title';\n\nexport async function handleFiltersClick(method) {\n  const filterButtons = Array.from(document.querySelectorAll('.btn-filter'));\n\n  filterButtons.forEach(button => {\n    button.addEventListener('click', async () => {\n      const searchForm = document.querySelector('.form-search-exersises');\n      searchForm.elements['search'].value = '';\n      searchForm.classList.remove('is-hide');\n      showSearchForm(false);\n      setExerciseTitle('');\n\n      if (!button.classList.contains('active')) {\n        filterButtons.forEach(button => button.classList.remove('active'));\n        button.classList.add('active');\n\n        const totalPages = await method({\n          filter: button.dataset.category.replace(' ', '+'),\n          page: 1,\n        });\n\n        createPagination({\n          params: { filter: button.dataset.category.replace(' ', '+'), page: 1 },\n          totalPages,\n          method: method,\n        });\n      }\n    });\n  });\n}\n","import axios from 'axios';\nimport { constants } from './constants';\n\nimport { createExerciseMarkup } from './exercise-card-markup';\nimport { createPagination } from './create-pagination';\nimport { showSearchForm } from './show-search-form';\nimport { showToast } from './toast';\nimport { attachExerciseModalListeners } from './modal-listener';\n\nexport async function fetchExercises(params) {\n  const category = document.querySelector('.btn-filter.active').dataset.exercise;\n\n  if (params?.value) {\n    params[category] = params?.value;\n  }\n\n  const keyword = document.querySelector('.input-search-exersises').value;\n  params.keyword = keyword;\n\n  showSearchForm(true);\n\n  let filterParams = '?';\n  const content = document.querySelector('.content');\n  const loader = document.querySelector('.loader-text');\n  loader.style.display = 'block';\n\n  for (const [key, value] of Object.entries(params)) {\n    filterParams += `${key}=${value}&`;\n  }\n  try {\n    const { data } = await axios({\n      method: 'get',\n      url: `${constants.DOMEN}/exercises${filterParams}limit=${window.innerWidth < 768 ? 8 : 10}`,\n      responseType: 'json',\n    });\n\n    content.innerHTML = createExerciseMarkup(data.results);\n\n    const pagination = document.querySelector('.pagination');\n    pagination.innerHTML = '';\n\n    if (data.totalPages > 1) {\n      createPagination({\n        params: params,\n        totalPages: data?.totalPages,\n        method: fetchExercises,\n      });\n    }\n  } catch (error) {\n    showToast({\n      type: 'error',\n      title: 'Server error',\n      message: 'Sorry, the exercises information was not retrieved from the server. Please refresh the page',\n    });\n  } finally {\n    loader.style.display = 'none';\n  }\n  attachExerciseModalListeners();\n}\n","export function setIconPaths(container) {\n  const isDeployed = window.location.hostname !== 'localhost';\n  const basePath = isDeployed ? '/goit-advancedjs-final-project' : '';\n  container.querySelectorAll('use[href*=\"images/icons.svg\"]').forEach(icon => {\n    const currentHref = icon.getAttribute('href');\n    icon.setAttribute('href', `${basePath}${currentHref}`);\n  });\n}\n\nexport function initIconPathObserver() {\n  const observer = new MutationObserver(mutations => {\n    mutations.forEach(mutation => {\n      mutation.addedNodes.forEach(node => {\n        if (node.nodeType === 1) {\n          setIconPaths(node);\n        }\n      });\n    });\n  });\n\n  observer.observe(document.body, {\n    childList: true,\n    subtree: true,\n  });\n\n  setIconPaths(document.body);\n}\n","const scrollProgress = document.querySelector('.scroll-to-top');\nlet pos = document.documentElement.scrollTop;\n\nexport function calcScrollValue() {\n  pos = document.documentElement.scrollTop;\n  pos > 100 ? (scrollProgress.style.display = 'flex') : (scrollProgress.style.display = 'none');\n}\n","import { showToast } from './toast';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const form = document.querySelector('.footer-form');\n  const emailInput = form?.querySelector('.footer-form-input');\n\n  form?.addEventListener('submit', event => {\n    event.preventDefault();\n\n    const email = emailInput.value;\n\n    if (!validateEmail(email)) {\n      showToast({\n        type: 'error',\n        title: 'Error',\n        message: 'Please enter a valid email address.',\n      });\n\n      return;\n    }\n\n    showToast({\n      type: 'success',\n      title: 'Success',\n      message: 'You have successfully subscribed!',\n    });\n\n    console.log('SENT TO THE SERVER:', email);\n\n    form.reset();\n  });\n\n  function validateEmail(email) {\n    const re = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n\n    return re.test(String(email).toLowerCase());\n  }\n});\n","import { createPagination } from './create-pagination';\nimport { fetchAndSetQuote } from './fetch-and-set-quote';\nimport { fetchCategories } from './fetch-categories';\nimport { handleFiltersClick } from './handle-filters-click';\nimport { fetchExercises } from './fetch-exercises';\nimport { initIconPathObserver } from './icon-path-updater';\nimport { calcScrollValue } from './scroll-to-top';\n\nimport { setExerciseTitle } from './set-exercise-title';\nimport './handle-email-form';\n\nconst searchForm = document.querySelector('.form-search-exersises');\nconst content = document.querySelector('.content');\nconst scrollProgress = document.querySelector('.scroll-to-top');\n\nconst filter = 'Muscles';\nconst page = 1;\nlet catValue = '';\n\nwindow.onload = function () {\n  const loader = document.querySelector('.loader-text');\n  loader.style.display = 'none';\n};\n\ndocument.addEventListener('DOMContentLoaded', async () => {\n  initIconPathObserver();\n\n  fetchAndSetQuote();\n  handleFiltersClick(fetchCategories);\n\n  const totalPages = await fetchCategories({\n    filter,\n    page,\n  });\n\n  if (totalPages > 1) {\n    createPagination({\n      params: { filter, page },\n      totalPages,\n      method: fetchCategories,\n    });\n  }\n});\n\nsearchForm?.addEventListener('submit', async e => {\n  e.preventDefault();\n\n  const category = document.querySelector('.btn-filter.active').dataset.exercise;\n\n  const totalPages = await fetchExercises({\n    [category]: catValue,\n    category,\n    page,\n  });\n});\n\nsearchForm?.addEventListener('reset', async e => {\n  e.preventDefault();\n  e.target.querySelector('.input-search-exersises').value = '';\n  await fetchExercises({\n    value: catValue,\n    page,\n  });\n});\n\ncontent?.addEventListener('click', async e => {\n  const item = e.target.closest('.category-wrap');\n  if (!item) return;\n  searchForm.classList.remove('is-hide');\n  catValue = item.getAttribute('name');\n\n  setExerciseTitle(catValue);\n  await fetchExercises({\n    value: catValue,\n    page,\n  });\n  if (window.innerWidth < 768) {\n    document.querySelector('.filter-title').scrollIntoView({ behavior: 'smooth' });\n  }\n});\n\ndocument.querySelector('.toggle-btn-home').classList.add('active');\ndocument.querySelector('.toggle-btn-favorites').classList.remove('active');\n\nscrollProgress.addEventListener('click', () => {\n  document.documentElement.scrollTop = 0;\n});\n\nwindow.onscroll = calcScrollValue;\nwindow.onload = calcScrollValue;\n"],"names":["createCategoryMarkup","data","filter","name","imgURL","fetchCategories","params","filterParams","content","loader","key","value","response","axios","constants","showToast","showSearchForm","isShow","searchForm","setExerciseTitle","text","title","titleSlash","handleFiltersClick","method","filterButtons","button","totalPages","createPagination","fetchExercises","category","keyword","createExerciseMarkup","pagination","attachExerciseModalListeners","setIconPaths","container","basePath","icon","currentHref","initIconPathObserver","mutations","mutation","node","scrollProgress","pos","calcScrollValue","form","emailInput","event","email","validateEmail","page","catValue","fetchAndSetQuote","item"],"mappings":"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"}